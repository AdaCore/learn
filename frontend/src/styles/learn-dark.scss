@import 'variables';
@import 'variables-dark';

@mixin menu_vertical_current_hover_dark_mode_colors {
    &:hover {
        background-color: #777777;
        color: darkorange;
    }
}

@mixin menu_vertical_current_dark_mode_colors {
    @include menu_vertical_current_hover_dark_mode_colors;
    color: $color-darktheme-menu-font;

    &:visited {
        color: $color-darktheme-menu-font;
        @include menu_vertical_current_hover_dark_mode_colors;
    }
}

@mixin menu_vertical_alt_current_hover_dark_mode_colors {
    color: $color-darktheme-menu-alt-font;
    &:hover {
        color: $color-darktheme-menu-alt-font-hover;
    }
}

@media (prefers-color-scheme: dark) {

    html {
        background-color: $color-darktheme-bg-dark !important;
    }
    body {
        background-color: $color-darktheme-bg-dark !important;
    }
    label {
        color: white;
    }
    .rst-content code,
    .rst-content tt,
    code {
        color: $color-darktheme-code-font;
        background-color: $color-darktheme-code-bg !important;
        border: 1px solid $color-darktheme-code-border;
    }
    pre {
        color: $color-darktheme-code-font;
        background-color: $color-darktheme-code-bg !important;
        border: 1px solid $color-darktheme-code-border;
    }
    .btn {
        background-color: $color-darktheme-theme-bg-dark;
        color: #fff;

        &:hover {
            background-color: lighten($color-darktheme-theme-bg-dark, 10%);
        }
    }

    .btn-neutral {
        background-color: #b3b6b6 !important;
        color: #404040 !important;
    }

    .wy-nav-content-wrap {
        background: $color-darktheme-bg-dark !important;
    }
    .wy-nav-content {
        background: $color-darktheme-content-bg !important;
        color: $color-darktheme-content-font;
    }

    .wy-side-nav-search {
        background-color: $color-darktheme-theme-bg-dark;
    }

    .wy-nav-side {
        background-color: darken($color-darktheme-menu-bg-l1, 10%);
    }

    .wy-menu-vertical {
        li {
            button.toctree-expand {
                color: lightgrey;
            }
            button.toctree-expand:before {
                color: lightgrey;
            }
            ul {
                background-color: $color-darktheme-menu-bg-l1;
            }
            a {
                @include menu_vertical_alt_current_hover_dark_mode_colors;
                background-color: $color-darktheme-menu-bg-l1;

                &:hover {
                    background-color: $color-darktheme-menu-bg-hover;
                }

                &:visited {
                    @include menu_vertical_alt_current_hover_dark_mode_colors;
                    background-color: $color-darktheme-menu-bg-l1;

                    &:hover {
                        background-color: $color-darktheme-menu-bg-hover;
                    }
                }
            }
            &.toctree-l2 {
                &.current>a {
                    background-color: $color-darktheme-menu-bg-l1;
                }
            }
            &.current {
                background-color: $color-darktheme-menu-bg-l1;

                a {
                    background-color: $color-darktheme-menu-bg-l1;
                    @include menu_vertical_current_dark_mode_colors;

                    &:hover {
                        background-color: $color-darktheme-menu-bg-hover;
                    }
                    &:visited {
                        background-color: $color-darktheme-menu-bg-l1;
                        &:hover {
                            background-color: $color-darktheme-menu-bg-hover;
                        }
                    }
                }
                &.toctree-l2 {
                    background-color: $color-darktheme-menu-bg-l1;

                    li.toctree-l3>a {
                        @include menu_vertical_current_dark_mode_colors;

                        background-color: $color-darktheme-menu-bg-l2;
                        &:hover {
                            background-color: $color-darktheme-menu-bg-hover;
                        }
                        &:visited {
                            background-color: $color-darktheme-menu-bg-l2;
                            &:hover {
                                background-color: $color-darktheme-menu-bg-hover;
                            }
                        }
                    }
                }
                &.toctree-l3 {
                    li.toctree-l4>a {
                        @include menu_vertical_current_dark_mode_colors;

                        background-color: $color-darktheme-menu-bg-l3;
                        &:hover {
                            background-color: $color-darktheme-menu-bg-hover;
                        }
                        &:visited {
                            background-color: $color-darktheme-menu-bg-l3;
                            &:hover {
                                background-color: $color-darktheme-menu-bg-hover;
                            }
                        }
                    }
                }
            }
        }
    }

    .admonition-in-other-languages {
        background: $color-darktheme-theme-alt-bg;
    }
    .rst-content {
        .highlight {
            background: $color-darktheme-theme-alt-bg;
        }
    }
    .rst-content .admonition,
    .rst-content .admonition-todo,
    .rst-content .attention,
    .rst-content .caution,
    .rst-content .danger,
    .rst-content .error,
    .rst-content .hint,
    .rst-content .important,
    .rst-content .note,
    .rst-content .seealso,
    .rst-content .tip,
    .rst-content .warning,
    .wy-alert {
        background: $color-darktheme-theme-alt-bg;
    }
    .rst-content .admonition-title, .wy-alert-title {
        // background: #6ab0de;
        background: #1a608e;
    }
    .rst-content div[class^=highlight],
    .rst-content pre.literal-block {
        border: 1px solid $color-darktheme-code-border;
        color: $color-darktheme-code-font;
    }
    .rst-content code.literal,
    .rst-content tt.literal {
        color: $color-darktheme-code-font;
    }
    .rst-content table.docutils thead,
    .rst-content table.field-list thead,
    .wy-table thead {
        background: #666666 !important;
        color: #cccccc !important;
    }
    .rst-content table.docutils,
    .wy-table-bordered-all {
        border: 1px solid $color-darktheme-border;
    }
    .rst-content table.docutils td,
    .wy-table-bordered-all td {
        border-bottom: 1px solid $color-darktheme-border;
        border-left: 1px solid $color-darktheme-border;
    }
    .wy-table-bordered {
        border: 1px solid $color-darktheme-border;
    }
    .wy-table-bordered-rows td {
        border-bottom: 1px solid $color-darktheme-border;
    }
    .wy-table-horizontal td,
    .wy-table-horizontal th {
        border-bottom: 1px solid $color-darktheme-border;
    }

    .rst-content table.docutils:not(.field-list) tr:nth-child(2n-1) td,
    .wy-table-backed,
    .wy-table-odd td,
    .wy-table-striped tr:nth-child(2n-1) td {
        background-color: $color-darktheme-theme-alt-bg;
    }

    //
    // theme overrides: widget
    //

    .tab {
        button {
            color: $color-darktheme-tab-font;
            &:hover {
                color: $color-darktheme-tab-hover-font;
            }
            &.active {
                color: $color-darktheme-tab-active-font;
                border-top: 2px solid $color-darktheme-theme-bg-dark;
                border-left: 1px solid $color-darktheme-widget-border;
                border-right: 1px solid $color-darktheme-widget-border;
            }
        }
    }

    .settings-bar {
        background-color: $color-darktheme-settingsbar-bg;
        color: white;

        button {
            background-color: transparent;
            color: white;
        }

        .dropdown-container {
            .dropdown-content {
                background-color: $color-darktheme-bg-dark;

                a {
                    color: white;

                    &:hover {
                        background-color: #ddd;
                    }
                }
            }
        }
    }

    .compiler-switch-help-info {
        background-color: $color-darktheme-settingsbar-bg;
    }

    .compiler-switch-help-info-click-remove {
        background-color: $color-darktheme-settingsbar-bg;
    }

    div {
        &.editor-container {
            border: 1px solid $color-darktheme-widget-border;
        }
        &.editor_label {
            border: 1px solid $color-darktheme-widget-border;
            color: $color-font-grey;
        }
        &.non-tabbed-links {
            border: 1px solid $color-darktheme-widget-border;
        }
        &.code_block_info {
            background: $color-darktheme-widget-output-area;
        }
        &.code_block_info_contents {
            color: $color-font-grey;
        }
        &.output_line {
            color: $color-font-grey;
        }
        &.output_msg {
            color: $color-widget-msg;
            &:hover {
                background-color: #fdd;
            }
        }
        &.output_msg_info {
            color: $color-darktheme-widget-info;
            &:hover {
                background-color: $color-widget-msg-info-bg-hover;
            }
        }
        &.output_info {
            color: $color-darktheme-widget-info;
        }
        &.output_error {
            color: $color-widget-error;
        }
        &.output_success {
            color: $color-widget-success;
        }
        &.output-area {
            background: $color-darktheme-widget-output-area;
        }
    }

    .read-only {
        background-color: $color-widget-readonly;
        opacity: 0.2;
        position: absolute;
    }

    a.ebook-download-button {
        background-color: $color-darktheme-theme-bg-dark;
    }
}
